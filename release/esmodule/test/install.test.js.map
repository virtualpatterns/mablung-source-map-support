{"version":3,"sources":["../../../source/esmodule/test/install.test.js"],"names":[],"mappings":"AAAA,OAAO,UAAP,MAAuB,UAAvB;AACA,OAAO,IAAP,MAAiB,MAAjB;AACA,OAAO,KAAP,MAAkB,KAAlB;AACA,OAAO,GAAP,MAAgB,KAAhB;;AAEA,MAAM,QAAQ,GAAG,GAAG,CAAC,aAAJ,CAAkB,MAAM,CAAC,IAAP,CAAY,GAA9B,CAAjB;AACA,MAAM,WAAW,GAAI,GAAE,QAAS,MAAhC;;AAEA,MAAM,IAAI,GAAG,UAAU,CAAC,cAAX,CAA0B,WAA1B,IAAyC,KAAzC,GAAiD,KAAK,CAAC,OAApE;;AAEA,IAAI,CAAC,eAAD,EAAkB,OAAO,IAAP,KAAgB;;AAEpC,MAAI,KAAK,GAAG,IAAI,KAAJ,CAAU,OAAV,CAAZ;;AAEA,MAAI,UAAU,GAAG,KAAK,CAAC,KAAN,CAAY,KAAZ,CAAkB,IAAlB,CAAjB;AACA,MAAI,GAAG,SAAH,IAAgB,UAApB;;AAEA,MAAI,OAAO,GAAG,sBAAd;AACA,MAAI,GAAG,SAAH,CAAa,0CAAb,IAA2D,SAAS,CAAC,KAAV,CAAgB,OAAhB,CAA/D;;AAEA,MAAI,IAAI,KAAK,KAAK,CAAC,OAAnB,EAA4B;AAC1B,IAAA,IAAI,CAAC,GAAL,CAAU,mBAAkB,IAAI,CAAC,QAAL,CAAc,EAAd,EAAkB,QAAlB,CAA4B,uBAAxD;AACD;;AAED,EAAA,IAAI,CAAC,EAAL,CAAQ,SAAR,EAAmB,QAAQ,CAAC,OAAT,CAAiB,UAAjB,EAA6B,QAA7B,CAAnB;;AAED,CAhBG,CAAJ","file":"install.test.js","sourcesContent":["import FileSystem from 'fs-extra'\nimport Path from 'path'\nimport _Test from 'ava'\nimport URL from 'url'\n\nconst FilePath = URL.fileURLToPath(import.meta.url)\nconst FileMapPath = `${FilePath}.map`\n\nconst Test = FileSystem.pathExistsSync(FileMapPath) ? _Test : _Test.failing\n\nTest('Error(string)', async (test) => {\n\n  let error = new Error('error')\n\n  let errorStack = error.stack.split('\\n')\n  let [, stackItem] = errorStack\n\n  let pattern = /at (.+):(\\d+):(\\d+)/i\n  let [, errorPath /* , errorLineNumber, errorColumnNumber */] = stackItem.match(pattern)\n\n  if (Test === _Test.failing) {\n    test.log(`The source map '${Path.relative('', FilePath)}.map' does not exist!`)\n  }\n\n  test.is(errorPath, FilePath.replace(/release/i, 'source'))\n\n})\n"]}